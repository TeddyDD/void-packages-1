# Template file for 'ergo'
pkgname=ergo
version=2.10.0
revision=1
build_style=go
go_import_path="github.com/ergochat/ergo"
hostmakedepends="git"
short_desc="Modern IRC server (daemon/ircd) written in Go"
maintainer="Daniel Lewan <vision360.daniel@gmail.com>"
license="MIT"
homepage="https://ergo.chat/about"
distfiles="https://github.com/ergochat/ergo/archive/v${version}.tar.gz"
checksum=be3a93e8c0ca30f40a1d82e8b282ea36f4de98b8277c74a5fe4c6260f28dcfb4
conf_files="/etc/ergo.yaml"
system_accounts="_ergo"
_ergo_homedir="/var/lib/ergo"
make_dirs="
 /var/lib/ergo 0755 _ergo _ergo"

post_install() {
	vlicense LICENSE

	vconf default.yaml ergo.yaml

	for doc in docs/*
	do
		vdoc "$doc"
	done

	vmkdir usr/share/${pkgname}
	vcopy ergo.motd usr/share/${pkgname}/default.motd

	vmkdir usr/share/${pkgname}/i18n
	vcopy "languages/*" usr/share/${pkgname}/i18n/

	vsv ergo
}

oragono_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	build_style=meta
	short_desc+=" (transitional dummy package)"
}
