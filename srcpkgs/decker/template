# Template file for 'decker'
pkgname=decker
version=1.41
revision=1
build_style=gnu-makefile
make_build_target="lilt decker"
hostmakedepends="xxd MultiMarkdown"
makedepends="SDL2-devel SDL2_image-devel"
short_desc="Multimedia platform for creating and sharing interactive documents"
maintainer="Daniel Lewan <vision360.daniel@gmail.com>"
license="MIT"
homepage="https://beyondloom.com/decker/"
distfiles="https://github.com/JohnEarnest/Decker/archive/v${version}.tar.gz"
checksum=8b0a3f86f96be1d70a7d0aeb0230a7225fb847dcb2d3ff1893405aa09826b4ee

pre_build() {
	vsed -i 's/@//' Makefile
}

post_build() {
	make docs
}

do_check() {
	make test
}

do_install() {
	vbin c/build/decker
	vbin c/build/lilt
	vlicense LICENSE.txt

	vmkdir usr/share/examples/decker
	vcopy examples/* usr/share/examples/decker/

	find docs/ -type f -iname '*.md' -exec rm {} \;
	vmkdir usr/share/doc/decker
	cp -r docs $DESTDIR/usr/share/doc/decker

	vinstall $FILESDIR/decker.desktop 644 /usr/share/applications
	vinstall $FILESDIR/decker.png 644 /usr/share/icons/hicolor/64x64/apps/
}
