# Template file for 'knit'
pkgname=knit
version=1.1.0
revision=1
build_style=go
go_import_path=github.com/zyedidia/knit/cmd/knit
go_ldflags="-X github.com/zyedidia/knit/info.Version=$version"
hostmakedepends="pandoc"
short_desc="Build tool inspired by Make and Plan9 Mk"
maintainer="Daniel Lewan <vision360.daniel@gmail.com>"
license="MIT"
homepage="https://github.com/zyedidia/knit"
distfiles="https://github.com/zyedidia/knit/archive/v${version}.tar.gz"
checksum=ab92b240adc1f63502bd1de7f1d3eb64f508aa1e2ca7955d648d0a7351bbf37f

post_build() {
	go build -o tools/replace/replace tools/replace/replace.go
	tools/replace/replace man/knit.md | pandoc -s -t man -o knit.1
}

post_install() {
	vman ./knit.1
	vlicense LICENSE
	vlicense LICENSE-EXTRA
}
